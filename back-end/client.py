from __future__ import print_function
import requests
import json
import cv2
import base64

# addr = 'https://desolate-escarpment-39555.herokuapp.com'
addr = 'http://127.0.0.1:5000'
test_url = addr + '/api/allergens'

# prepare headers for http request
content_type = 'applications/json'
headers = {'content-type': content_type}

# Open image
img = open('test1.jpg', mode='rb').read()

# list of allergies
allergies = ['dairy','egg','soy','wheat']

# makes list of allergies into string
# decodes image into utf-8 string codec
my_data = {'allergies' : str(allergies),
           'img': base64.encodebytes(img).decode("utf-8")}

# my_data = '[{"img":"iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAQAAACWCLlpAAAM82lDQ1BrQ0dDb2xv\\r\\nclNwYWNlR2VuZXJpY0dyYXlHYW1tYTJfMgAAWIWlVwdYU8kWnluS0BJ6lRI60gwo\\r\\nXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixv\\r\\nEopYdt\\/7vnfzzb3\\/nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKw\\r\\nB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJ\\r\\nAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHM\\r\\nzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fw\\r\\nk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMP\\r\\nsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK\\r\\n289\\/cB5PzcgKkdpgAvFBUXa0\\/7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII\\r\\n6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxh\\r\\nUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnv\\r\\nLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTI\\r\\nyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qX\\r\\nCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0f\\r\\nD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOgh\\r\\nfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt\\/DR\\r\\ndSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu\\/N36blSyRmKQBkfWSAWwv8gN\\r\\nG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C\\/xab0t+\\r\\nkw6gti89fg5Qa1Qazn6Odhten3RNqSU\\/lb9CTyCYXpU\\/wBZ8pkrzwF4c9ioMFNjS\\r\\n9tJ6adtoNbQXtPufOWg3aH\\/S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+\\r\\n9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux\\/s2j0Ol92\\r\\nBPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY\\r\\n+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6K\\r\\nhbJcMFsmL5Ltdr5MTvBF\\/YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN\\r\\n9yVZpnBvSPXC\\/XBXaR\\/7oi+w\\/qv1o3cGm+hOtCT6Ey0\\/04l+xCBiAHw6SOeJ44jB\\r\\nELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRo\\r\\ntbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjm\\r\\ng4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG\\r\\n1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQ\\r\\nK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+g\\r\\nF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJ\\r\\nuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq\\/hnXgf\\/pFAJugTbAjuBAZhCiGNMJtQ\\r\\nRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5\\r\\nksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F\\r\\n3lzeXT5cPkU+V365\\/Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKho\\r\\nouimGKnIVVygWKa4V\\/GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZ\\r\\nTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8\\r\\nioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7\\r\\nqI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro\\/KJxUaNPU01zgmacZo5mheYRzQ4t\\r\\nTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66\\r\\nGbordQ\\/r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o\\/Tn6G\\/Vb9Xv\\r\\nNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7\\r\\njPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM\\/MyGyyWb7ZbrPb5vLm\\r\\nruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEb\\r\\nx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC\\r\\n+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74\\r\\n+vHPJ9hMYE\\/YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetG\\r\\ncJvkNt+tye2tu7O72H2\\/+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etn\\r\\nrw5vY2+md6X3Ax9TnxSfKp\\/H9LH0dHoN\\/dkk2iThpEOTXvu6+871Pe6H+QX6Fftd\\r\\n9Ffzj\\/Uv978fYBKQFrA7oC\\/QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkk\\r\\nOqQ85EGodagwtHEyOjl48urJd8PMw\\/hhh8NBOCN8dfi9CMuIWRG\\/RhIjIyIrIh9F\\r\\nOUTlR7VEq0fPiN4V\\/SpmUszymDuxVrGS2OY45bikuOq41\\/F+8aviO6aMmzJ3yoUE\\r\\nvQRuQn0iKTEusSqxf6r\\/1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTH\\r\\nJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfj\\r\\nzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq\\/Ez+KeyDLNysq4IbARF\\r\\ngo5Z7rPWzuoThgirRIhomqherAH\\/YLZKrCQ\\/SDqzvbIrst\\/Mjpt9IEc1h5\\/Tmmud\\r\\nuyT3cV5A3vY5+BzWnOZ84\\/yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3\\r\\nAlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb\\/4R\\/5H748Ul45esX\\/KxOKX4\\r\\nfAmtpLTk\\/VLW0vM\\/OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1\\r\\na6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXG\\r\\nlI1XN\\/lsqt1ssLlk87ufuT\\/f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVh\\r\\nB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95\\r\\nX\\/v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO\\/2v+6o8m4\\r\\nqeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb\\r\\n6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS\\/WXXK5VH\\/Z7XLjlYlXjl71\\r\\nvnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB\\/Igvvqdyr\\/S+\\r\\n\\/v3K38f+vqfDueNIp19n64PoB3cesh4+\\/UP0x\\/uuwkfkR6WPjR5Xdzt2N\\/UE9Fx+\\r\\nMvVJ11PB04Heoj9V\\/9zwzOrZwb98\\/mrtm9LX9Vz4\\/NPfS1\\/ovtjxcsLL5v6I\\/vuv\\r\\nMl8NvC5+o\\/tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e\\/ZT56dN\\/AC1d8BzqtvWA\\r\\nAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAACW\\r\\noAMABAAAAAEAAACWAAAAADSDahoAAAAcaURPVAAAAAIAAAAAAAAASwAAACgAAABL\\r\\nAAAASwAAA5ULbQZxAAADYUlEQVR4AexZTW4TYRR7ZBdO0O4QcAlYUe5UcQuEKIjS\\r\\nsxRxC+AI\\/LeCgmAFGaRE07GK\\/DzuvGT0JYsSyz\\/PbhtEiGiPtkBboC3QFmgLtAVq\\r\\nFjiIk3gbF\\/En+bxYqV7GQc3RFal34lVyIpz0NG5XnD515v34PHqqbrxPcW\\/q06fO\\r\\nuxUfLVN1c32Ju1OfP23eqW2qbq7X0x4\\/bdpD61TdXA+mLTBl2klvrF9xGPvp8P2V\\r\\n6nfP5TjtsDOCd72ah\\/LVj3oub2SXrRd+79Xck6\\/d67l8k122Xti9y6yfY45de3Rf\\r\\nZ\\/twlXT5bPXQrpIunzbWVi+QOM71E+HySZw+lrqIG0kLV0mXT\\/L8DP1mPI\\/zzd9m\\r\\n\\/YN39c9n8SyWmQl47vGshlp\\/g6\\/l3wCL+DnLsX7Egv95YZltLHapf7x5\\/hq+SG1A\\r\\nk5dxFGez+lX8Gk+v6w2+v+r67bH7uiuPspvLgkd8Z8puLgtuY41YICEt+waXBSfG\\r\\nGVLLbi4LHi6QeF12c1lwYpwhtezmsuDhAonXZTeXBSfGGVLLbi4LHi6QeF12c1lw\\r\\nYpwhtezmsuDhAonXZTeXBSfGGVLLbi4LHi6QeF12sx7MfC7p4lxeUr\\/5sk\\/6lRa8\\r\\nXP0HwfnqefSfT5FcHKyk3Yw+aUQLfrL56PDxlYkuDgZoN6NPGtGC32\\/G+nBloouD\\r\\nAdrN6JNGtGBG5eJgJcYZVQZEC2ZULg6WZJxRZUC0YEbl4mBJxhlVBkQLZlQuDpZk\\r\\nnFFlQLRgRuXiYEnGGVUGRAtmVC4OlmScUWVAtGBG5eJgScYZVQZEC2ZULg6WZJxR\\r\\nZUC0YEbl4mBJxhlVBkQLZlQuDpZknFFlQLRgRuXiYEnGGVUGRAtmVC4OlmScUWVA\\r\\ntGBG5eJgScYZVQZEC2ZULg6WZJxRZUC0YEbl4mBJxhlVBkQLZlQuDpZknFFlQLRg\\r\\nRuXiYEnGGVUGRAtmVC4OlmScUWVAtGBG5eJgScYZVQZEC2ZULg6WZJxRZUC0YEbl\\r\\n4mBJxhlVBkQLZlQuDpZknFFlQLRgRuXiYEnGGVUGRAtmVC4OlmScUWVAtGBG5eJg\\r\\nScYZVQZEC2ZULg6WZJxRZUC0YEbl4mBJxhlVBkQLZlQuDpZknFFlQLRgRuXiYEnG\\r\\nGVUGRAtmVC4OlmScUdVD\\/gIAAP\\/\\/01lcMAAAA3NJREFU7ZtNapRBGIQ7yxzBuPHn\\r\\nFNmNl0ruIUL0KgrewuAZjCgaBF2Ns8n0NzwMVhdFvxn5zMJJUU\\/VW426UGzN+7Ft\\r\\n\\/UtP6Mz2KJTysEBJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQ\\r\\nvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVK\\r\\neThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJ\\r\\nJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8\\r\\nYoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5\\r\\nOFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4Ukkm\\r\\nFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxi\\r\\nhUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4\\r\\nUkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYV\\r\\nULxihUp5OFJJJhVQvGKFSnk4UkkmFVC8YoVKeThSSSYVULxihUp5OFJJJhVQvGKF\\r\\nSnk4UkkmFVC8YoVKeThSSSYVULzi7\\/v\\/HvXt6A0pDwu8m5kzrHjFb\\/aP9fpoY8rD\\r\\nAu9m5gwrXvF5e9t+7b5u2vnRxpSHBd7NzBlW\\/OKzdvbPtpTnsMi\\/+TBn+Luy4uFL\\r\\nO1B2c1lx3z78qezmsuLhJ+pA2c1lxX378Keym8uKh5+oA2U3lxX37cOfym4uKx5+\\r\\nog6U3VxW3LcPfyq7uax4+Ik6UHZzWXHfPvyp7Oay4uEn6kDZzT\\/3f3+wbU\\/6PY\\/4\\r\\n09PFxT\\/m3vl5UX01t9psu15cfGtmmNi7RfXvdtUuzJw52EW7bn8WF9\\/MqX1oebWo\\r\\nXv5ZcBqfNw8zZv384WSf6+OsJ+o9z9qXk3yur+1lHzHv02W7O7nnumuX8x7osOlF\\r\\nO63fjO\\/b88MBs7\\/b7P4R4rbdP+pfY\\/ft0+7KzeynWfvWF1hfYH2B9QXWF\\/j\\/XuAv\\r\\nei6oVYJ2j+0AAAAASUVORK5CYII="},{"allergies":["diary","egg","soy"]}]'
# 

# send http request with image and receive response
response = requests.post(test_url, data= json.dumps(my_data),headers=headers)
# decode response
print(response.json())